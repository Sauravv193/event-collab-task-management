import{c as k,j as e,A as F,m as n,b as z,z as C,d as A,D as Q,B as c,n as O}from"./index-C9p9T0xJ.js";import{r as l}from"./vendor-CGzxjxki.js";import{c as T,u as B,a as I}from"./eventService-B6VAk_os.js";import{E as R}from"./EventCard-CYjtNomU.js";import{u as K}from"./useMutation-DxIInw50.js";import"./router-BtvKvBzC.js";import"./calendar-C-wrZFyD.js";import"./user-DyX5Splb.js";/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=k("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=k("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=k("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=k("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),H=({isOpen:m,onClose:i,title:a,children:o})=>e.jsx(F,{children:m&&e.jsx(n.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:i,children:e.jsxs(n.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},exit:{y:30,opacity:0},className:"relative w-full max-w-lg bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:a}),e.jsx("button",{onClick:i,className:"p-1 rounded-full text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700",children:e.jsx(M,{size:20})})]}),o]})})}),W=({onClose:m})=>{const[i,a]=l.useState(""),[o,s]=l.useState(""),x=new Date().toISOString().split("T")[0],[g,p]=l.useState(x),[w,E]=l.useState(""),q=z(),b=K({mutationFn:T,onSuccess:()=>{C.success("Event created successfully!"),q.invalidateQueries({queryKey:["events"]}),m()},onError:t=>{var h,j,u,d,f;if(((h=t.response)==null?void 0:h.status)===400&&((u=(j=t.response)==null?void 0:j.data)!=null&&u.errors)){const v=t.response.data.errors.find(N=>N.field==="date");if(v){C.error(v.defaultMessage);return}}C.error(((f=(d=t.response)==null?void 0:d.data)==null?void 0:f.message)||"Failed to create event.")}}),D=t=>{t.preventDefault(),b.mutate({name:i,description:o,date:g,location:w})};return e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Event Name"}),e.jsx("input",{type:"text",id:"name",value:i,onChange:t=>a(t.target.value),required:!0,className:"mt-1 w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"}),e.jsx("textarea",{id:"description",value:o,onChange:t=>s(t.target.value),required:!0,className:"mt-1 w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 shadow-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Date"}),e.jsx("input",{type:"date",id:"date",value:g,min:x,onChange:t=>p(t.target.value),required:!0,className:"mt-1 w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Location"}),e.jsx("input",{type:"text",id:"location",value:w,onChange:t=>E(t.target.value),className:"mt-1 w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 shadow-sm"})]})]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsx("button",{type:"submit",disabled:b.isPending,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:b.isPending?"Creating...":"Create Event"})})]})},te=()=>{const[m,i]=l.useState(!1),[a,o]=l.useState(""),[s,x]=l.useState(""),[g,p]=l.useState(!1),{searchQuery:w,filters:E,setSearchQuery:q,setFilters:b,clearFilters:D}=A(),{data:t,isLoading:h,error:j,refetch:u}=B({queryKey:["events"],queryFn:I,onError:r=>{O.error("Failed to load events")}}),d=l.useMemo(()=>t?t.filter(r=>{var L;const y=!a||r.name.toLowerCase().includes(a.toLowerCase())||r.description.toLowerCase().includes(a.toLowerCase())||((L=r.location)==null?void 0:L.toLowerCase().includes(a.toLowerCase())),P=!s||r.category===s;return y&&P}):[],[t,a,s]),f=l.useMemo(()=>t?[...new Set(t.map(y=>y.category).filter(Boolean))]:[],[t]),v=r=>{o(r.target.value)},N=()=>{o(""),x(""),p(!1)};return h?e.jsx(Q,{}):e.jsxs(e.Fragment,{children:[" ",e.jsxs(n.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"container mx-auto p-4 sm:p-6",children:[e.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Dashboard"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Welcome! Here are your upcoming events."})]}),e.jsxs(c,{onClick:()=>i(!0),children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Create Event"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[e.jsxs("div",{className:"relative flex-grow",children:[e.jsx($,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search events...",value:a,onChange:v,className:"w-full pl-10 pr-4 py-2 rounded-md bg-white dark:bg-white/10 border border-gray-300 dark:border-white/20 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{variant:"outline",onClick:()=>p(!g),className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4"}),"Filters"]}),(a||s)&&e.jsxs(c,{variant:"outline",onClick:N,className:"flex items-center gap-2 text-red-600 hover:text-red-700",children:[e.jsx(M,{className:"w-4 h-4"}),"Clear"]})]})]}),e.jsx(F,{children:g&&e.jsx(n.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700 mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),e.jsxs("select",{value:s,onChange:r=>x(r.target.value),className:"w-full px-3 py-2 rounded-md bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"All Categories"}),f.map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date"}),e.jsx("input",{type:"date",className:"w-full px-3 py-2 rounded-md bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(c,{onClick:()=>u(),variant:"outline",className:"w-full",children:"Refresh"})})]})})})]}),j&&e.jsxs(n.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-200 px-4 py-3 rounded-md mb-6",children:[e.jsx("p",{children:"Failed to load events. Please try again."}),e.jsx(c,{onClick:()=>u(),className:"mt-2",size:"sm",children:"Retry"})]}),d&&e.jsxs("div",{className:"mb-4 text-sm text-gray-600 dark:text-gray-400",children:["Showing ",d.length," of ",(t==null?void 0:t.length)||0," events",(a||s)&&e.jsxs("span",{className:"ml-2",children:[a&&`• Search: "${a}"`,s&&`• Category: ${s}`]})]}),e.jsx(F,{mode:"wait",children:d.length===0&&!h?e.jsxs(n.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center py-12",children:[e.jsxs("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:[e.jsx(S,{className:"w-16 h-16 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:a||s?"No events found":"No events yet"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a||s?"Try adjusting your search or filters":"Create your first event to get started"})]}),!a&&!s&&e.jsxs(c,{onClick:()=>i(!0),children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Create Event"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:d.map((r,y)=>e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},transition:{delay:y*.05},layout:!0,children:e.jsx(R,{event:r})},r.id))})})]}),e.jsx(H,{isOpen:m,onClose:()=>i(!1),title:"Create a New Event",children:e.jsx(W,{onClose:()=>i(!1)})})]})};export{te as default};
